# Copyright 2025 Canonical Ltd.
# See LICENSE file for licensing details.

type: "charm"
name: postfix-relay
title: Postfix Relay
summary: Postfix Relay
links:
  issues: https://github.com/canonical/postfix-relay-operators/issues
  source: https://github.com/canonical/postfix-relay-operators
  contact: https://launchpad.net/~canonical-is-devops
  documentation: https://discourse.charmhub.io/t/postfix-relay-documentation-overview/16137

description: |
  Installs an SMTP server and leverages the configuration geenrated by a subordinate charm, if any.

base: ubuntu@24.04
platforms:
  amd64:

parts:
  charm:
    plugin: charm
    source: .
    build-snaps:
      - rustup
    override-build: |
      rustup default stable
      craftctl default
    build-packages:
      - libffi-dev
      - libssl-dev
      - pkg-config

charm-libs:
  - lib: operator_libs_linux.systemd
    version: "1"

peers:
  peer:
    interface: postfix-relay-peer
provides:
  metrics:
    interface: postfix-metrics
requires:
  milter:
    interface: milter
